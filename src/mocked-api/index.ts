//
// DO NOT LOOK AT THIS FILE
//

//
// ALL THE NEEDED INFORMATION
// FOR HOW TO CALL THIS IS IN THE README.MD

































































































































































































































































































































































































































































































































































































































































































































































import nock from "nock";

export const weatherApiUrl = "http://weatherapi.com";

nock(`${weatherApiUrl}/`)
  .persist()
  .get("/weather")
  .query(true)
  .reply(function (uri, requestBody) {
    const url = new URL(uri, `${weatherApiUrl}/`);
    let responses = {
      77429: [200, { temperature: 72, condition: "Sunny" }],
      12345: [200, { temperature: 50, condition: "Cloudy" }],
      61101: [200, { temperature: 68, condition: "Rainy" }],
    };

    const zip = url.searchParams.get("zip") ?? "";
    const response = responses[zip] || [
      200,
      { temperature: null, error: "no weather data found" },
    ];

    return response;
  })

  // catch all
  .persist()
  .get(/.*/)
  .reply(404);
